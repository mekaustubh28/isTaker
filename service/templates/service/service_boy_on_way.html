{% extends 'service/base.html' %}

{% block title %} search- {% endblock %}

{% block stylesheet %}
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'service/scss/search/search.css' %}">
<style>
  div.service_boy_on_way {
    text-align: center;
  }

  img {
    max-width: 100%;
  }

  /* Let's make sure all tables have defaults */
  table td {
    vertical-align: top;
  }

  .body-wrap {
    background-color: #f6f6f6;
    width: 100%;
    border-radius: 20px;
  }

  .order_container {
    display: block !important;
    max-width: 600px !important;
    margin: 0 auto !important;
    /* makes it centered */
    clear: both !important;
  }

  .content {
    max-width: 600px;
    margin: 0 auto;
    display: block;
    padding: 20px;
  }

  /* -------------------------------------
  HEADER, FOOTER, MAIN
------------------------------------- */
  .main {
    background: #fff;
    border: 1px solid #e9e9e9;
    border-radius: 20px;
  }

  .content-wrap {
    padding: 20px;
  }

  .content-block {
    padding: 0 0 20px;
  }

  .header {
    width: 100%;
    margin-bottom: 20px;
  }

  .footer {
    width: 100%;
    clear: both;
    color: #999;
    padding: 20px;
  }

  .footer a {
    color: #999;
  }

  .footer p,
  .footer a,
  .footer unsubscribe,
  .footer td {
    font-size: 12px;
  }

  /* -------------------------------------
  TYPOGRAPHY
------------------------------------- */
  h1,
  h2,
  h3 {
    font-family: "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    color: #000;
    margin: 40px 0 0;
    line-height: 1.2;
    font-weight: 400;
  }

  h1 {
    font-size: 32px;
    font-weight: 500;
  }

  h2 {
    font-size: 24px;
  }

  h3 {
    font-size: 18px;
  }

  h4 {
    font-size: 14px;
    font-weight: 600;
  }

  p,
  ul,
  ol {
    margin-bottom: 10px;
    font-weight: normal;
  }

  p li,
  ul li,
  ol li {
    margin-left: 5px;
    list-style-position: inside;
  }

  /* -------------------------------------
  LINKS & BUTTONS
------------------------------------- */
  a {
    color: #1ab394;
    text-decoration: underline;
  }

  .btn-primary {
    text-decoration: none;
    color: #FFF;
    background-color: #1ab394;
    border: solid #1ab394;
    border-width: 5px 10px;
    line-height: 2;
    font-weight: bold;
    text-align: center;
    cursor: pointer;
    display: inline-block;
    border-radius: 5px;
    text-transform: capitalize;
  }

  /* -------------------------------------
  OTHER STYLES THAT MIGHT BE USEFUL
------------------------------------- */
  .last {
    margin-bottom: 0;
  }

  .first {
    margin-top: 0;
  }

  .aligncenter {
    text-align: center;
  }

  .alignright {
    text-align: right;
    width: max-content;
  }

  .alignleft {
    text-align: left;
  }

  .clear {
    clear: both;
  }

  /* -------------------------------------
  ALERTS
  Change the class depending on warning email, good email or bad email
------------------------------------- */
  .alert {
    font-size: 16px;
    color: #fff;
    font-weight: 500;
    padding: 20px;
    text-align: center;
    border-radius: 3px 3px 0 0;
  }

  .alert a {
    color: #fff;
    text-decoration: none;
    font-weight: 500;
    font-size: 16px;
  }

  .alert.alert-warning {
    background: #f8ac59;
  }

  .alert.alert-bad {
    background: #ed5565;
  }

  .alert.alert-good {
    background: #1ab394;
  }

  /* -------------------------------------
  INVOICE
  Styles for the billing table
------------------------------------- */
  .invoice {
    margin: 40px auto;
    text-align: left;
    width: 80%;
  }

  .invoice td {
    padding: 5px 0;
  }

  .invoice .invoice-items {
    width: 100%;
  }

  .invoice .invoice-items td {
    border-top: #eee 1px solid;
  }

  .invoice .invoice-items .total td {
    border-top: 2px solid #333;
    border-bottom: 2px solid #333;
    font-weight: 700;
  }

  /* -------------------------------------
  RESPONSIVE AND MOBILE FRIENDLY STYLES
------------------------------------- */
  @media only screen and (max-width: 640px) {

    h1,
    h2,
    h3,
    h4 {
      font-weight: 600 !important;
      margin: 20px 0 5px !important;
    }

    h1 {
      font-size: 22px !important;
    }

    h2 {
      font-size: 18px !important;
    }

    h3 {
      font-size: 16px !important;
    }

    .order_container {
      width: 100% !important;
    }

    .content,
    .content-wrap {
      padding: 10px !important;
    }

    .invoice {
      width: 100% !important;
    }
  }

  .otp {
    border: 1px solid gray;
    background-color: rgba(128, 128, 128, 0.082);
    width: max-content;
    margin: 2px auto;
    border-radius: 5px;
    padding: 2px 10px;
    color: blue;
  }

  td.address{
    width: 200px;
  }
</style>
{% endblock %}

{% block body %}
<!-- If Service Boy Available -->
<div class="service_boy_on_way">
  {% if not No_Service_Boy %}
  <div class="Order_Confirm">
    <!-- {% for service_boy in service_boys %}
    <h1>{{service_boy}}</h1>
    {% endfor %} -->
    <table class="body-wrap">
      <tbody>
        <tr>
          <td class="order_container" width="600">
            <div class="content">
              <h5>Order Summary</h5>
              <!-- {{Your_Order}} -->
              <table class="main" width="100%" cellpadding="0" cellspacing="0">
                <tbody>
                  <tr>
                    <td class="content-wrap aligncenter">
                      <table width="100%" cellpadding="0" cellspacing="0">
                        <tbody>
                          <tr>
                            <td class="content-block">
                              <h2 style="color: green;">Thanks for using our Service</h2>
                              <h5 style="font-weight: 400;">Driver is on the Way</h5>
                              <!-- <h3 class="otp">OTP: <span>{{Your_Order.otp}}</span></h3> -->
                              <!-- first_name, last_name, mobile -->
                              <h4>Driver: {{Your_Order.service_boy_name}}</h4>
                              <h4>Contact No.: {{Your_Order.service_boy_mobile}}</h4>
                              <a href="">Track Your Driver</a>
                            </td>
                          </tr>
                          <tr>
                            <td class="content-block">
                              <table class="invoice">
                                <tbody>
                                  <tr>
                                    <td>
                                      <table class="invoice-items" cellpadding="0" cellspacing="0">
                                        <tbody>
                                          <tr>
                                            <td>First Name</td>
                                            <td class="alignright">{{first_name}}</td>
                                          </tr>
                                          <tr>
                                            <td>Last Name</td>
                                            <td class="alignright">{{last_name}}</td>
                                          </tr>
                                          <tr>
                                            <td>Invoice</td>
                                            <td class="alignright">#{{Your_Order.Order_ID}}</td>
                                          </tr>
                                          <tr>
                                            <td>Date / Time</td>
                                            <td class="alignright">{{Your_Order.dt_string}}</td>
                                          </tr>
                                          <tr>
                                            <td>Hospital Name</td>
                                            <td class="alignright">{{Your_Order.hospital_name}}</td>
                                          </tr>
                                          <tr style="text-align:center; width:100%;">
                                            <td class=""><br><b>Pick-Up Address</b></td>
                                          </tr>
                                          <tr>
                                            <td style="width: 100%;">{{Your_Order.from}}</td>
                                            <!-- <td class="address alignright">{{Your_Order.to}}</td> -->
                                          </tr>
                                          <tr style="text-align:center; width:100%;">
                                            <td class=""><b>Drop Address</b></td>
                                          </tr>
                                          <tr>
                                            <td style="width: 100%;">{{Your_Order.to}}</td>
                                            <!-- <td class="address alignright">{{Your_Order.to}}</td> -->
                                          </tr>
                                          <tr style="text-align:center; width:100%;">
                                            <td class=""><br><b>Services</b></td>
                                          </tr>
                                          {% for i in Active_Service.service_list %}
                                          <tr>
                                            <td>{{i}}</td>
                                            {% for j in Active_Service.total_price %}
                                            {% if forloop.parentloop.counter == forloop.counter%}
                                            <td class="alignright">â‚¹{{j}}/-</td>
                                            {% endif %}
                                            {% endfor %}
                                          </tr>
                                          {% endfor %}
                                          <tr style="color: green;">
                                            {% if Active_Service.coupon == '' %}
                                            <td>Discount (No Coupon)</td>
                                            {% else %}
                                            <td>Discount ({{Active_Service.coupon}})</td>
                                            {% endif %}
                                            <td class="alignright">-â‚¹{{Active_Service.offer_amount}}/-</td>
                                          </tr>
                                          <tr class="total">
                                            <td class="alignright" width="80%">Total</td>
                                            <td class="alignright">â‚¹{{Active_Service.price}}/-</td>
                                          </tr>
                                        </tbody>
                                      </table>
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </td>
          <td></td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- If Service Boy not Available -->
  {%else%}
  <br>
  <div class="alert alert-primary" role="alert">
    <h4 class="alert-heading"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
        class="bi bi-exclamation-triangle-fill flex-shrink-0 me-2" viewBox="0 0 16 16" role="img" aria-label="Warning:">
        <path
          d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z" />
      </svg>No Service Boy Available!</h4>
    <p>Currently No Service Boy is Available to valet you. But this Doesn't means we will not help. If you want you can
      try other hospital, or If you want we can save your order and repond you through Email as soon as any Service
      Boy is Available. This usually takes upto 1 hour.</p>
    <hr>
    <p class="mb-0">select <b>No</b> to Try Another Hospital. We will restore the Order to your Cart.<br>select <b>Yes</b> to Save Your Order. We will send you a Service Boy within an Hour.</p>
    <br>
    <form action="/customer_dashboard/{{Active_User.customer_id}}/service_boy_on_way" method="post">
      {% csrf_token %}
      <input type="hidden" id="pendingOrder" value="" name="pendingOrder">
      <button class="btn pending-order-btn btn-primary mx-2" id="no" style="border-radius:5px;padding:5px 40px;font-size:25px;" type="submit">
        No
      </button>
      <button class="btn pending-order-btn btn-primary mx-2" id="yes" style="border-radius:5px;padding:5px 40px;font-size:25px;" type="submit">
        Yes
      </button>
    </form>
  </div>
  {% endif %}
</div>
{% endblock %}
{% block javascript %}
<script>
  $('button.pending-order-btn').click(function(){
    id = $(this).attr('id')
    $('input#pendingOrder').attr('value', id)
  })
</script>
<script src="{% static 'service/js/customer_dashboard.js' %}"></script>
{% endblock %}